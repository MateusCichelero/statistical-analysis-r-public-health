(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{"17Gp":function(module,e,t){"use strict";t.d(e,"b",function(){return O}),t.d(e,"d",function(){return A}),t.d(e,"a",function(){return L}),t.d(e,"c",function(){return F});var n=t("VbXa"),r=t.n(n),o=t("q1tI"),a=t.n(o),s=t("eJMc"),i=t.n(s),c=t("F/us"),u=t.n(c),p=t("17x9"),l=t.n(p),d=t("S+eF"),m=t.n(d),f=t("TSOT"),h=t("fw5G"),v=t.n(h),g=t("GqWO"),b=t("q5zD"),E=t("rcV8"),I=t("8cuT"),y=t("NMx/"),C=t("6R2g"),D=t("oEt1"),S=t("2BcA"),w=t("GP6s"),P=t.n(w),x=4,q=function(e){function RespondedLearnersImageBaseComponent(){return e.apply(this,arguments)||this}r()(RespondedLearnersImageBaseComponent,e);var t=RespondedLearnersImageBaseComponent.prototype;return t.renderMorePeopleImage=function renderMorePeopleImage(){if(this.props.responseCount>4){var e=Object(D.a)(this.props.responseCount-4,!0);return a.a.createElement("li",{className:"bgcolor-black-g3"},a.a.createElement("div",{className:"horizontal-box align-items-absolute-center num-responder-images caption-text"},"+",e))}return null},t.render=function render(){var e=this.props.answers,t=e&&e.filter(function(e,t){return t<4}).map(function(e){return{image:e.creator.photoUrl,name:e.creator.fullName}});if(!t||0===t.length)return null;return a.a.createElement("ul",{className:"nostyle horizontal-box align-items-absolute-center learner-image-list"},t.map(function(e){var t=e.name,n=e.image;return a.a.createElement("li",{key:t},a.a.createElement(C.a,{width:32,height:32,fullName:t,profileImageUrl:n}))}),this.renderMorePeopleImage())},RespondedLearnersImageBaseComponent}(a.a.Component);q.propTypes={responseCount:l.a.number.isRequired,answers:l.a.array};var O=function(e){function Input(){return e.apply(this,arguments)||this}var t;return r()(Input,e),Input.prototype.render=function render(){var e=this.props,t=e.question,n=e.savingState,r=e.placeholder;return a.a.createElement("div",{className:"horizontal-box align-items-left theme-light c-prompt-card"},a.a.createElement(y.a,{hideFollow:!0,question:t,parentPost:t,savingState:n,placeholder:P()(r)}))},Input}(a.a.Component);O.propTypes={placeholder:l.a.string.isRequired,question:l.a.object.isRequired,savingState:l.a.string.isRequired};var A=function(e){function Saving(){return e.apply(this,arguments)||this}var t;return r()(Saving,e),Saving.prototype.render=function render(){return a.a.createElement("div",{className:"horizontal-box align-items-absolute-center bgcolor-white c-prompt-card color-hint-text"},a.a.createElement(b.a,{name:"spinner",className:"cif-spin"}),a.a.createElement("span",{className:"caption-text"},P()("Submitting Your Response")))},Saving}(a.a.Component),N=function(e){function CompletedBaseComponent(){return e.apply(this,arguments)||this}var t;return r()(CompletedBaseComponent,e),CompletedBaseComponent.prototype.render=function render(){var e=this.props.url;return a.a.createElement("div",{className:"vertical-box align-items-absolute-center bgcolor-white c-prompt-card",role:"alert"},a.a.createElement("span",{className:"color-secondary-text"},P()("Your response has been submitted. Engage and discuss with other learners below!")),this.props.url&&a.a.createElement(i.a,{className:"link-button secondary",to:e},P()("View My Response")))},CompletedBaseComponent}(a.a.Component);N.propTypes={showLink:l.a.bool,questionId:l.a.string.isRequired,url:l.a.string};var j={Input:O,Saving:A,Completed:u.a.compose(Object(E.a)(function(e){if(e.showLink){var t=Object(f.a)("/api/onDemandCourseForumAnswers.v1/",{type:"rest"}),n=[e.userId,e.courseId,e.questionId].join("~"),r=(new v.a).addQueryParam("q","byForumQuestionId").addQueryParam("userCourseQuestionId",n).addQueryParam("sort","createdAtAsc").addQueryParam("creatorId",e.userId).toString();return m()(t.get(r)).then(function(e){if(!e.elements.length)return{url:void 0};var t;return{url:Object(g.b)(e.elements[0].forumAnswerId)}})}return m()({url:void 0})}))(N),RespondedLearnersImage:u.a.compose(Object(I.a)(["ThreadDetailsStore"],function(e,t){var n=e.ThreadDetailsStore,r=t.questionId,o=t.page;return{answers:n.getReplies(r,o,S.c.newestSort)||[]}}))(q)},L=j.Completed,F=j.RespondedLearnersImage,T=j},"5A/O":function(module,e,t){"use strict";var n=t("F/us"),r=t.n(n),o=t("PStO"),a=t("EdUP"),s=t("W1i5"),i=t("PDuk"),c=t("sQ/U"),u=t("8z5R"),p=t("vn3c"),l=t("2BcA"),d=t("hIm3"),m=r.a.compose(o.a.createContainer(function(e){var t=e.itemMetadata,n=t.getId(),r=t.get("course").get("id");return{prompt:u.a.get(Object(i.c)([c.a.get().id,r,n]),{includes:u.a.DEFAULT_INCLUDES,fields:u.a.DEFAULT_FIELDS})}}),o.a.createContainer(function(e){var t=e.prompt;if(!t||!t.promptType)return{};var n=t.promptType.definition.courseItemForumQuestionId,r=[t.userId,n].join("~");return{discussionPromptQuestion:p.a.localGet(r,{fields:p.a.DEFAULT_FIELDS})}}),Object(a.a)(function(e){var t;return!!e.discussionPromptQuestion}),Object(s.a)(function(e){var t=e.discussionPromptQuestion,n=t&&t.id.split("~")[3],r;return{isLoaded:!0,questionId:n,question:{id:n,questionId:n,type:"question",forumType:l.j.rootForumType},promptContent:t&&t.content.details,learnerCount:t&&t.totalAnswerCount}}))(d.a);e.a=m},"8z5R":function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),o=t("HlCP"),a=t("vn3c"),s=function(e){function OnDemandDiscussionPrompts(){return e.apply(this,arguments)||this}return r()(OnDemandDiscussionPrompts,e),OnDemandDiscussionPrompts}(o.a);s.RESOURCE_NAME="onDemandDiscussionPrompts.v1",s.DEFAULT_INCLUDES=["question"],s.DEFAULT_FIELDS=["promptType","".concat(a.a.RESOURCE_NAME,"(").concat(a.a.DEFAULT_FIELDS.join(","),")")],e.a=s},GmVJ:function(module,e,t){"use strict";t.r(e);var n=t("VbXa"),r=t.n(n),o=t("K2XA"),a=t("q1tI"),s=t.n(a),i=t("Yf05"),c=t("WdIA"),u=t.n(c),p=function(e){function DiscussionPromptWrapper(){return e.apply(this,arguments)||this}var t;return r()(DiscussionPromptWrapper,e),DiscussionPromptWrapper.prototype.render=function render(){var e=this.props,t=e.computedItem,n=e.itemMetadata;return s.a.createElement(o.a,{className:"rc-DiscussionPromptWrapper",hideFeedback:!0},s.a.createElement("div",{className:"discussion-prompt-content"},s.a.createElement("div",{className:"vertical-box align-items-vertical-center"},s.a.createElement("div",null,s.a.createElement("span",{className:"cif-stack cif-2x"},s.a.createElement("i",{className:"cif-circle cif-stack-2x c-prompt-icon"}),s.a.createElement("i",{className:"cif-comment cif-stack-1x cif-inverse comment-icon"}))),s.a.createElement("h1",{className:"c-prompt-title h2"},t.name)),s.a.createElement(i.a,{itemMetadata:n,previouslyCompleted:t.isCompleted})))},DiscussionPromptWrapper}(s.a.Component);e.default=p},RX7l:function(module,exports,e){var t=e("SU0G"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},o=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},SU0G:function(module,exports,e){},WdIA:function(module,exports,e){var t=e("mchH"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},o=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},Yf05:function(module,e,t){"use strict";t.d(e,"a",function(){return y});var n=t("VbXa"),r=t.n(n),o=t("lSNA"),a=t.n(o),s=t("17x9"),i=t.n(s),c=t("q1tI"),u=t.n(c),p=t("F/us"),l=t.n(p),d=t("ngyh"),m=t("+LJP"),f=t("8cuT"),h=t("ii1C"),v=t("5A/O"),g=t("5+aF"),b=t("8/1n");function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=function discussionPromptContainer(){return v.a},I=Object(p.compose)(Object(g.a)({fields:["forumType","urlId"]}),Object(m.a)(function(e,t){return _objectSpread(_objectSpread({},Object(h.a)(e,t)),{},{page:e.location.query.page?parseInt(e.location.query.page,10):1,answerId:e.location.query.answerId?e.location.query.answerId:void 0})}),Object(f.a)(["ThreadDetailsStore"],function(e,t){var n=e.ThreadDetailsStore,r=t.itemMetadata;return{savingStates:Object.assign({},n.savingStates)}}))(E()),y=function(e){function FluxibleConnectedDiscussionPrompt(){return e.apply(this,arguments)||this}r()(FluxibleConnectedDiscussionPrompt,e);var t=FluxibleConnectedDiscussionPrompt.prototype;return t.componentWillMount=function componentWillMount(){this.fluxibleContext=Object(b.a)(this.context.fluxibleContext)},t.render=function render(){return u.a.createElement(d.a,{context:this.fluxibleContext.getComponentContext()},u.a.createElement(I,this.props))},FluxibleConnectedDiscussionPrompt}(u.a.Component);y.contextTypes={fluxibleContext:i.a.object}},hIm3:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),o=t("17x9"),a=t.n(o),s=t("q1tI"),i=t.n(s),c=t("sQ/U"),u=t("kvW3"),p=t("JacN"),l=t("BZ+2"),d=t("MIcm"),m=t("2BcA"),f=t("q5zD"),h=t("7GkZ"),v=t("abvH"),g=t("17Gp"),b=t("GP6s"),E=t.n(b),I=t("RX7l"),y=t.n(I),C=function(e){function DiscussionPrompt(t,n){var r;return(r=e.call(this,t,n)||this).state={savingState:d.d.UNCHANGED,forumError:!1},r}r()(DiscussionPrompt,e);var t=DiscussionPrompt.prototype;return t.componentDidMount=function componentDidMount(){this.props.isLoaded&&(this.setState({questionId:this.props.questionId}),this.fetchAnswers(this.props.questionId,m.c.newestSort,this.props.page))},t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.state.questionId;this.setState({savingState:e.savingStates[t]||d.d.UNCHANGED}),t&&this.props.savingStates[t]===d.d.SAVING&&e.savingStates[t]===d.d.SAVED&&this.fetchAnswers(t,m.c.newestSort,this.props.page)},t.componentDidUpdate=function componentDidUpdate(e,t){var n=this.props,r=n.questionId,o=n.page;e.page!==o&&this.fetchAnswers(r,m.c.newestSort,o)},t.fetchAnswers=function fetchAnswers(e,t,n){var r=this.props,o=r.courseId,a=r.courseSlug,s=r.currentForum,i;(0,this.context.executeAction)(p.b,{questionId:e,courseId:o,courseSlug:a,sort:t,page:n,contextId:o,userId:c.a.get().id,forumType:s.forumType.typeName})},t.renderLoading=function renderLoading(){return i.a.createElement("div",{className:"vertical-box align-items-vertical-center"},i.a.createElement(f.a,{name:"spinner",className:"cif-spin cif-3x"}))},t.renderInput=function renderInput(){var e=this.props,t=e.learnerCount,n=e.question,r=e.questionId,o=e.page,a=t>0;return i.a.createElement("div",null,i.a.createElement("div",{className:"color-hint-text participation-text"},E()("Participation is optional")),i.a.createElement(g.b,{savingState:this.state.savingState,question:n,placeholder:E()("Type your response here...")}),i.a.createElement(g.c,{responseCount:t,questionId:r,page:o}),i.a.createElement("div",{className:"horizontal-box align-items-absolute-center caption-text color-secondary-text"},a?i.a.createElement("div",null,i.a.createElement(u.c,{value:t})," ",i.a.createElement(u.b,{message:E()("{learnerCount, plural, =1 { learner has} other { learners have}} submitted a response."),learnerCount:t})):i.a.createElement("div",null,E()("Be the first to submit a response"))))},t.renderError=function renderError(){return i.a.createElement("div",{className:"horizontal-box align-items-absolute-center bgcolor-white c-prompt-card"},i.a.createElement("span",{className:"caption-text color-secondary-text"},E()("Sorry, we were unable to retrieve a forum.")))},t.renderCompleted=function renderCompleted(){var e=this.props,t=e.questionId,n=e.previouslyCompleted,r=e.page,o=e.currentForum,a=e.answerId,s=e.currentForumUrl,u=e.courseId;return i.a.createElement("div",null,i.a.createElement(g.a,{showLink:n,questionId:t,userId:c.a.get().id,courseId:u}),i.a.createElement("div",{className:"c-thread-container"},i.a.createElement(v.a,{sort:m.c.newestSort,page:r,forumId:o.id,questionId:t,answerId:a,forumLink:s})))},t.renderContent=function renderContent(){var e=this.state.savingState;if(e===d.d.SAVED||this.props.previouslyCompleted)return this.renderCompleted();if(e===d.d.UNCHANGED)return this.renderInput();if(e===d.d.SAVING)return i.a.createElement(g.d,null);return!1},t.renderBody=function renderBody(){var e=this.props.promptContent;return i.a.createElement("div",null,i.a.createElement("span",null,i.a.createElement(h.a,{cml:e})),this.renderContent())},t.render=function render(){var e=this.props.isLoaded,t=this.state.forumError;return i.a.createElement("div",{className:"rc-DiscussionPrompt"},!t&&(e?this.renderBody():this.renderLoading()),t&&this.renderError())},DiscussionPrompt}(i.a.Component);C.propTypes={savingStates:a.a.object.isRequired,previouslyCompleted:a.a.bool.isRequired,page:a.a.number,answerId:a.a.string,courseId:a.a.string,courseSlug:a.a.string,currentForum:a.a.instanceOf(l.a),currentForumUrl:a.a.string,questionId:a.a.string,question:a.a.object,promptContent:a.a.object,learnerCount:a.a.number,isLoaded:a.a.bool},C.contextTypes={executeAction:a.a.func.isRequired,router:a.a.object.isRequired},e.a=C},mchH:function(module,exports,e){},vn3c:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),o,a=function(e){function OnDemandDiscussionPromptQuestions(){return e.apply(this,arguments)||this}return r()(OnDemandDiscussionPromptQuestions,e),OnDemandDiscussionPromptQuestions}(t("HlCP").a);a.RESOURCE_NAME="onDemandDiscussionPromptQuestions.v1",a.DEFAULT_FIELDS=["content","creatorId","createdAt","forumId","sessionId","lastAnsweredBy","lastAnsweredAt","totalAnswerCount","topLevelAnswerCount","viewCount"],e.a=a}}]);
//# sourceMappingURL=116.1d619323d7d0d4c8f395.js.map